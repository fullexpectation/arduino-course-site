---
{"dg-publish":true,"permalink":"/1/arduino/3-3-2/"}
---

tags: #Arduino #执行器
# **课程主题：小小音乐家——蜂鸣器与声音编程**

  ----------

## **第一部分：硬件基础与“有源”蜂鸣器（10-15分钟）**

  ----

### **1. 硬件认知：找不同**

*   **外观区分**：
    *   **有源（Active）**：底部通常有黑色胶封，背面看是平的（或贴了“WASHING”贴纸）。
    *   **无源（Passive）**：底部能看到绿色的电路板（PCB），是裸露的。

*   **原理比喻**：
    *   **有源** = **自带喇叭的收音机**。只要通电，它内部的振荡源就开始工作，发出“嘀——”的声音（只有一种声音）。
    *   **无源** = **钢琴/吉他**。通电不会响，你需要给它具体的“震动频率”（推它一下）它才会响。

----

### **2. 有源蜂鸣器编程（快速过）**
   
*   **接线**：正极接 Pin 8，负极接 GND。（**建议串联一个 220Ω 电阻，否则全班一起响会非常吵**）。
*   **代码**：
    *   提问：“如果我想让它像报警器一样滴滴滴响，怎么写？”
    *   学生会立刻回答：“像闪烁 LED 灯一样！”
    *   让学生快速写出 `digitalWrite(8, HIGH); delay(500); digitalWrite(8, LOW); delay(500);`。

  -----

### **3. 痛点引入**

*   让学生试着改变 delay，发现只能改变快慢，不能改变**音调（高低）**。

*   **引出主角**：想要唱《孤勇者》？那得用**无源蜂鸣器**！

  

---
  

## **第二部分：无源蜂鸣器与 tone() 函数（20分钟）**

  
---------
### **1. 换硬件**

*   拔掉有源，换上无源蜂鸣器。


------
### **2. 核心函数讲解**

*   Arduino 专门为无源蜂鸣器提供了一个函数：

    *   `tone(引脚号, 频率);` —— 开始响

    *   `tone(引脚号, 频率, 持续时间);` —— 响一会儿自动停

    *   `noTone(引脚号);` —— 闭嘴
   ----

*   **声音实验（互动环节）**：

    *   尝试 `tone(8, 200);` （低沉的声音）

    *   尝试 `tone(8, 1000);` （尖锐的声音）

    *   **知识点**：频率（Hz）越高，声音越尖；频率越低，声音越低沉。

  

---

  

## **第三部分：实战一——警报声（巩固 For 循环）（20分钟）**

  

### **目标**：制作跌宕起伏的防空警报或救护车声音。这是复习 `for` 循环的最佳案例。

  -----

### **1. 逻辑分析**

*   声音从低音（500Hz）慢慢升到高音（1000Hz），然后再降回来。

*   这不就是 `i++` 和 `i--` 吗？

  ------

### **2. 代码演示**

```cpp

void loop() {

  // 声音变高

  // 讲解：i 代表频率。从500开始，每次增加5，直到1000

  for (int i = 500; i <= 1000; i += 5) {

    tone(8, i);

    delay(10); // 稍微停顿，让人耳能听出变化过程

  }

  // 声音变低

  for (int i = 1000; i >= 500; i -= 5) {

    tone(8, i);

    delay(10);

  }

}

```

### **3. 练习**：让学生修改参数，制作出“快节奏警报”或“慢节奏警报”。

  

---

  

## **第四部分：实战二——播放旋律（巩固数组）（25分钟）**

  

### **目标**：利用数组存放乐谱，播放一段简单的音乐（如《两只老虎》或《超级玛丽》开头）。

  ---------

### **1. 乐理简化（不要讲太深）**

*   告诉孩子：每一个音符（Do Re Mi）对应一个数字（频率）。

    *   Do (1) = 262

    *   Re (2) = 294

    *   Mi (3) = 330

    *   Fa (4) = 349

    *   Sol (5) = 392

    *   La (6) = 440

    *   Si (7) = 494

  -------

### **2. 为什么要用数组？**

*   如果不由数组，代码是这样的（写在黑板上）：

    `tone(8, 262); delay(500);`

    `tone(8, 294); delay(500);`

    ...写100行。

*   **数组法**：把乐谱装进一个盒子里！

  ------

### **3. 代码实现**

```cpp

// 定义乐谱数组：Do, Do, Sol, Sol, La, La, Sol

int melody[] = {262, 262, 392, 392, 440, 440, 392};

// 定义节拍数组（可选，简易版可以统一定义时间）

int noteDurations[] = {400, 400, 400, 400, 400, 400, 800};

  

void setup() {

  // 只需要播放一次，所以写在setup里

  // 这里的 7 是数组的长度

  for (int i = 0; i < 7; i++) {

    tone(8, melody[i], noteDurations[i]); // 播放第 i 个音

    // 为了让音符之间有间隔，需要 delay 一点时间

    // 通常设置为音符时长的 1.3 倍

    delay(noteDurations[i] * 1.3);

    noTone(8); // 停止当前声音

  }

}

  

void loop() {

  // 这里留空，不循环播放

}

```

### **4. 挑战**：给出一张简谱（数字），让学生自己查表填入数组，播放出这首歌。

  

---

  

## **第五部分：创意挑战（剩余时间）**

  

### **如果还有时间，结合之前学的“随机数”：**

  -------

*   **R2-D2 机器人音效**：

    ```cpp

    void loop() {

      tone(8, random(500, 2000)); // 随机频率

      delay(random(50, 200));     // 随机时长

    }

    ```

    *   这个效果非常科幻，孩子们通常会玩疯。

  

---

  

### **⚠️ 老师备课避坑指南（重要）**

  

### 1.  **必须要串联电阻**：

    *   无源蜂鸣器直接接 5V 声音很大且刺耳，20个学生同时做实验简直是灾难。**务必串联 220Ω 或 1kΩ 电阻**，声音会变小且柔和。

    *   或者用胶带把蜂鸣器的发声孔贴住一半。

### 2.  **tone() 函数的冲突**：

    *   告诉学生，`tone()` 函数会占用单片机的定时器。如果以后用红外遥控库或者某些电机库，可能会冲突（现在不用深讲，提一句即可）。

    *   **同一个时间只能让一个引脚响**。不能同时 `tone(8...)` 和 `tone(9...)`。

### 3.  **乐谱查询表**：

    *   不要让学生上课去背频率表。准备一张做好的 PPT 或者打印的小纸条，上面列着：`Do=262, Re=294...` 供他们查阅。

  

这节课的内容非常扎实：既复习了硬件逻辑，又实战了 `For循环` 和 `数组`，而且最终效果（音乐）非常直观。祝你上课顺利！